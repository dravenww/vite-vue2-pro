import{a as e,n as s}from"./index.15788707.js";import{S as i}from"./SwitchRoles.c8778271.js";import"./vendor.d0ee885f.js";function t(s,i){const{value:t}=i,a=e.getters&&e.getters.roles;if(!(t&&t instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(t.length>0){const e=t;a.some((s=>e.includes(s)))||s.parentNode&&s.parentNode.removeChild(s)}}var a={inserted(e,s){t(e,s)},update(e,s){t(e,s)}};const n=function(e){e.directive("permission",a)};window.Vue&&(window.permission=a,Vue.use(n)),a.install=n;const r={};var o=s({name:"DirectivePermission",components:{SwitchRoles:i},directives:{permission:a},data:()=>({key:1}),methods:{checkPermission:function(s){if(s&&s instanceof Array&&s.length>0){const i=e.getters&&e.getters.roles,t=s;return i.some((e=>t.includes(e)))}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1},handleRolesChange(){this.key++}}},(function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"app-container"},[i("switch-roles",{on:{change:e.handleRolesChange}}),i("div",{key:e.key,staticStyle:{"margin-top":"30px"}},[i("div",[i("span",{directives:[{name:"permission",rawName:"v-permission",value:["admin"],expression:"['admin']"}],staticClass:"permission-alert"},[e._v(" Only "),i("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("admin")]),e._v(" can see this ")],1),i("el-tag",{directives:[{name:"permission",rawName:"v-permission",value:["admin"],expression:"['admin']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-permission=\"['admin']\" ")])],1),i("div",[i("span",{directives:[{name:"permission",rawName:"v-permission",value:["editor"],expression:"['editor']"}],staticClass:"permission-alert"},[e._v(" Only "),i("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("editor")]),e._v(" can see this ")],1),i("el-tag",{directives:[{name:"permission",rawName:"v-permission",value:["editor"],expression:"['editor']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-permission=\"['editor']\" ")])],1),i("div",[i("span",{directives:[{name:"permission",rawName:"v-permission",value:["admin","editor"],expression:"['admin','editor']"}],staticClass:"permission-alert"},[e._v(" Both "),i("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("admin")]),e._v(" and "),i("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("editor")]),e._v(" can see this ")],1),i("el-tag",{directives:[{name:"permission",rawName:"v-permission",value:["admin","editor"],expression:"['admin','editor']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-permission=\"['admin','editor']\" ")])],1)]),i("div",{key:"checkPermission"+e.key,staticStyle:{"margin-top":"60px"}},[e._m(0),i("el-tabs",{staticStyle:{width:"550px"},attrs:{type:"border-card"}},[e.checkPermission(["admin"])?i("el-tab-pane",{attrs:{label:"Admin"}},[e._v(" Admin can see this "),i("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-if=\"checkPermission(['admin'])\" ")])],1):e._e(),e.checkPermission(["editor"])?i("el-tab-pane",{attrs:{label:"Editor"}},[e._v(" Editor can see this "),i("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-if=\"checkPermission(['editor'])\" ")])],1):e._e(),e.checkPermission(["admin","editor"])?i("el-tab-pane",{attrs:{label:"Admin-OR-Editor"}},[e._v(" Both admin or editor can see this "),i("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v(" v-if=\"checkPermission(['admin','editor'])\" ")])],1):e._e()],1)],1)],1)}),[function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("aside",[e._v(" In some cases, using v-permission will have no effect. For example: Element-UI's Tab component or el-table-column and other scenes that dynamically render dom. You can only do this with v-if. "),i("br"),e._v(" e.g. ")])}],!1,(function(e){for(let s in r)this[s]=r[s]}),"2347dd16",null,null);o.options.__file="src/views/permission/directive.vue";var m=o.exports;export default m;
